{"pageProps":{"note":{"id":"tq7vt8nv3jk1860gz5pk59s","title":"2022-06-12","desc":"","updated":1655071092624,"created":1655066577907,"traitIds":["journalNote"],"custom":{},"fname":"daily.journal.2022.06.12","type":"note","vault":{"fsPath":"vault"},"contentHash":"3a22786320f6ba997c7db4a32cb7ae12","links":[],"anchors":{"annotation-updates":{"type":"header","text":"Annotation Updates","value":"annotation-updates","line":10,"column":0,"depth":2}},"children":[],"parent":"ilbjp6rq879dcc2sdkjx4tg","data":{}},"body":"<h1 id=\"2022-06-12\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#2022-06-12\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>2022-06-12</h1>\n<h2 id=\"annotation-updates\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#annotation-updates\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Annotation Updates</h2>\n<p><strong>TL;DR</strong> Rather than hard coding error messages at the source, provide additional attributes in the error object so we can delegate all message formatting concerns to the logger service.</p>\n<ol>\n<li>\n<p>Refactor existing type <code>AnnotationError</code> => <code>FieldError</code> (this is an unrelated type)</p>\n</li>\n<li>\n<p>Update global state types:</p>\n<pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">ANNOTATION_ERROR</span> <span class=\"token operator\">=</span> <span class=\"token string\">'AnnotationError'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">OBJECT_ID_NOT_FOUND</span> <span class=\"token operator\">=</span> <span class=\"token string\">'OBJECT_ID_NOT_FOUND'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">PARENT_FIELD_PATH_NOT_FOUND</span> <span class=\"token operator\">=</span> <span class=\"token string\">'PARENT_FIELD_PATH_NOT_FOUND'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">PARENT_OBJECT_ID_NOT_FOUND</span> <span class=\"token operator\">=</span> <span class=\"token string\">'PARENT_OBJECT_ID_NOT_FOUND'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">FIELD_NOT_FOUND</span> <span class=\"token operator\">=</span> <span class=\"token string\">'FIELD_NOT_FOUND'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">MULTIPLE_CONTAINER_OBJECTS</span> <span class=\"token operator\">=</span> <span class=\"token string\">'MULTIPLE_CONTAINER_OBJECTS'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">AnnotationErrorType</span></span> <span class=\"token operator\">=</span>\n    <span class=\"token operator\">|</span> <span class=\"token keyword\">typeof</span> <span class=\"token constant\">OBJECT_ID_NOT_FOUND</span>\n    <span class=\"token operator\">|</span> <span class=\"token keyword\">typeof</span> <span class=\"token constant\">PARENT_FIELD_PATH_NOT_FOUND</span>\n    <span class=\"token operator\">|</span> <span class=\"token keyword\">typeof</span> <span class=\"token constant\">PARENT_OBJECT_ID_NOT_FOUND</span>\n    <span class=\"token operator\">|</span> <span class=\"token keyword\">typeof</span> <span class=\"token constant\">FIELD_NOT_FOUND</span>\n    <span class=\"token operator\">|</span> <span class=\"token keyword\">typeof</span> <span class=\"token constant\">MULTIPLE_CONTAINER_OBJECTS</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">FieldError</span></span> <span class=\"token punctuation\">{</span>\n    message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    annotationXPath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    elementXPath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    attrValue<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    type<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">AnnotationsTreeFieldPath</span></span> <span class=\"token punctuation\">{</span>\n    oid<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">;</span>\n    fp<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    loc<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    hasOnlyTextNodes<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">FieldPathError</span></span> <span class=\"token punctuation\">{</span>\n    message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    fieldPath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    elementXPath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    value<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">AnnotationsTreeFieldPath</span><span class=\"token punctuation\">;</span>\n    type<span class=\"token operator\">:</span> <span class=\"token keyword\">typeof</span> <span class=\"token constant\">ANNOTATION_ERROR</span><span class=\"token punctuation\">;</span>\n    kind<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">AnnotationErrorType</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">AnnotationError</span></span> <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">FieldError</span> <span class=\"token operator\">|</span> <span class=\"token known-class-name class-name\">FieldPathError</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">State</span></span> <span class=\"token punctuation\">{</span>\n    fetchFieldsError<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Error</span> <span class=\"token operator\">|</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">;</span>\n    fieldsErrors<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">FieldError</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    clientAnnotationErrors<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">AnnotationError</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n</li>\n<li>\n<p>Update <code>logAnnotationErrors</code> to provide all message formatting logic (previously encoded in <code>message</code> attribute)</p>\n</li>\n<li>\n<p>Add a step to group errors by elementXPath prefix, display related errors as a single group.</p>\n</li>\n</ol>","noteIndex":{"id":"tjo6ofe6jnmhoiu439b1w5m","title":"Root","desc":"","updated":1653388098050,"created":1653388098050,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"751db27904810511db8b169b37266ad0","links":[],"anchors":{"welcome-to-dendron":{"type":"header","text":"Welcome to Dendron","value":"welcome-to-dendron","line":7,"column":0,"depth":1},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":11,"column":0,"depth":2}},"children":["rh9hcb7wtoodm4zbkdng8wd","fhngva5d1pz4yxj3fvhqdmm","zo0dkyv7938yq1gcx8uuziy"],"parent":null,"data":{},"body":"# Welcome to Dendron\n\nThis is the root of your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top.\n\n## Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{}},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enableHandlebarTemplates":false,"templateHierarchy":"template"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"siteUrl":"https://drkstr101.github.io/dendron","enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"drkstr101","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enablePrettyLinks":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"enableTaskNotes":true,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}